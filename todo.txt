add middleware token check
add middleware error handling
typify returns